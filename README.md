Чат-бот для Twitch.
====================================
# Возможности

 - Пишет логи чата указанного канала.
 - Два режима работы, обычный и с влиянием на игру
 - Имеет интеграцию с игрой Mincraft (команды в чате влияют на игру)
 - Инеграция чата Twithc в чат Minecraft 
 - Считывает информацию о донатах на стриме, и реагирует на нее
 - Игры:
	- Виселица (начать !виселица, закончить !stop виселица)
	- Города (начать !города, закончить !stop города)
	- Города мир (начать !городамир, закончить !stop городамир)
	- Русская рулетка (начать !рулетка, закончить !stop рулетка)
	- Предсказание (начать !предсказание). Генерирует случайное предсказание из набора случайных фраз.
- Команда !help - информация обо всех командах

=============================================
# Основные принципы работы:
 В основе лежит библиотека TwitchIO, которая предостваляет набор асинхронных методов для парсинга чата на канале.
Вся работа с чатом, чат-игры и ответы самого бота идет через эту библиотеку.

 Взаимодействие с игрой осуществляеться с помощью простого FTP, и всю работу бота можно свести к следующим этапам:
	
	1) Запускаетсья класс dscp.py который:
		- В зависимости от выбранного режима формирует файл "timer_state.ini" в котором хранться настройки по работе программы.
		- Парсит информацию с виджета на котором приходят ведомления о пришедших пожертвованиях и генерирует события в игре(подробнее в 3 пункте)
		- запускает как субпроцесс bottwitch.py
	2) В "bottwitch.py" если в сообщении есть знак "!" вызываеться ивент "command". Если текст идущий после соотвествует одной из команд то выполняеться ее функция в том же потоке.
	3) Обработка всех команд осуществляеться одним и тем же методом методом "perform_cmd(ctx, cmd)", который в зависимости от типа введенной команды выбирает методы,
	   которые будут формировать общий пакет данных. Некоторые методы генерирует случайные данные из составленных наборов или диапазонов.
	4) Составленный набор данных записываться в json. Т.к. все происходит асинхронно запись в файл идет по очереди, потоки ждут пока файл будет доступен для них.
	5) Когда набор данных соствален генерируеться локальный виджет на HTML с автообневлением через JavaScript, который отображеться на стриме и играет роль визуального уведомления
	   о выполненных командах.
	6) При старте программы в режими интеграции с игрой, запускаеться еще один процесс "timer_round" задча которого осуществлять постоянный обмен данными с сервером игры.
	7) На стороне сервера прописан скрипт на JavaScript который расшифровывает пакеты и генерирует события в игре в зависимсоти от полученного набора данных.
	   Так же скрипт ведет посчет выполненных команд, отправляет сообщения с чата Twicha в игру. А еще он сам создает небольшой пакет данных о состоянии игры и положениях игроках.

 Код во многом не оптимизирован т.к. писался для личных нужд

===============================
# Установка

1. Установить необходимые пакеты:
 ```
 pip install twitchio
 pip install requests
 ```

# Настройка

Остается только настроить бота.
Для этого, в файле bot введите свои данные:
 ```
 nickBot = "Ник_бота_(ник_аккаунта_на_котором_он_будет_работать)"
 nickAdmin = "Ник_администратора_бота_(оставьте_пустым_если_бот_стоит_на_том_же_аккаунте_что_используете_и_Вы)"
 id_token = "ID_клиента_приложения"
 secret = "Секрет_вашего_приложения_(без_oauth:)"
 channelName = "Название_канала_где_бот_будет_работать"
 ```
(Как получить ID и секрет я расскажу чуть ниже.)

Запустить бота через dscp.py

# Получение ID и секрета
Получить секрет своего аккаунта можно [тут](https://twitchapps.com/tmi/).
Получить ID можно по секрету, введя в консоле такие команды:
 ```
 py (или python, или python3)
 import requests
 print(requests.get("https://id.twitch.tv/oauth2/validate", headers={"Authorization": "OAuth Ваш_секрет_без_oauth:"}).json()["client_id"])
 ```
В результате вы получите ID.

